<p><font face="Verdana">出处：CSDN[2006-03-14 15:30:05]&nbsp; 作者：litp&nbsp; </font></p>
<p><font face="Verdana">　　这几天升级了一下原来的1.1项目，发现了一些问题，总结一下放在这里，也提醒还没有来得及升级或准备升级的朋友，升级的过程中少走弯路，少浪费时间。<br />
　　1．Global.asax文件的处理形式不一样<br />
　　转化后将出现错误，在vs2003中Global.asax具有代码后置文件，2.0下, 将代码分离文件移到 App_Code 目录下，以便使其自动变为可通过应用程序中的任意 ASP.NET 页面访问。“Code-behind”属性将从 ASAX 文件的指令中删除。vs2005则直接把代码写在Global.asax。所以需要删除转化过来的文件重新加入，并把相应的代码copy过来。<br />
　　2．2.0没有了项目文件。<br />
　　 在 1.1 应用程序中，项目文件包含生成设置、对外部程序集的引用以及项目中的文件列表。而在 2.0 应用程序中，不再需要版本设置和文件列表，因为 Web 项目目录下的所有文件都被视为 Web 项目的一部分。<br />
　　3．代码分离模式。<br />
　　在 ASP.NET 1.1 中，代码分离模式使内容（例如 test.aspx）与代码（例如 test.aspx.cs）分离。内容页面从代码分离页面继承而来，代码分离页面包含用户和设计器生成的代码。<br />
　　ASP.NET 2.0 通过使用局部类来增强代码分离模式，使用 partial 关键字可以将单个类的代码分隔到两个独立的文件中。它允许一个类跨越多个文件。在新的代码分离模式中，内容页面从编译的类继承而来，它由相应的代码分离页面以及自动生成的存根文件组成，存根文件用于为内容页面中使用的控件定义字段声明。此项更改使自动生成的代码与用户的代码分离，并且使代码分离页面显著变小且更加简洁。局部类结构还降低了由于编辑设计器生成的代码而不小心破坏页面的风险。<br />
　　如果出错请检查是否有partial 关键字，否则添加 partial 关键字。<br />
　　4．语法检查。<br />
　　asp.net1.1程序，编译时不会检查aspx、aspcx等文件中的语法错误，而vs2005编译时会检查项目中所有的aspx、aspcx等文件中的语法，所以如果有语法错误，会导致编译无法通过。<br />
　　5．控件声明。<br />
　　如果在 .aspx 页面上声明了所有控件，则从代码分离文件中删除所有控件声明，否则报错：重复定义。<br />
　　6．（仅限于 C#）将事件挂钩代码从代码分离文件的 InitialzeComponent 函数移到 .aspx 页面中。<br />
　　请注意，此操作不适用于自动调用的事件，包括 Page_Init、Page_Load、Page_DataBind、Page_PreRender、Page_Unload、Page_Error、Page_AbortTransaction 和 Page_CommitTransaction。 <br />
　　7． 部署方式（预编译、完整编译、可更新站点等）。<br />
　　在 1.x 中，Web 应用程序是作为一个大型程序集而预编译和部署的。内容页面（*.aspx）不在服务器上编译，但可以在服务器上编辑。借助新的页面编译模式和目录结构，您就可以使用多种不同的配置来部署 ASP.NET 2.0 应用程序。一种情况，您可以预编译所有的 ASPX 页面并部署由完全编译好的程序集组成的 Web 应用程序。在这种模式下，您不能在服务器上轻松地更改该应用程序。另一种情况，您可以在不预编译任何代码的情况下部署应用程序。在这种配置下，您可以直接在服务器上更改该应用程序中的 .aspx 页面、代码分离文件或其他任何代码。当用户请求服务器上的页面时，页面将被动态编译。<br />
　　8．将 .aspx 页面中的所有 CodeBehind 属性更改为 CodeFile 属性<br />
　　CodeBehind: 指定包含与页关联的类的已编译文件的名称。该属性不能在运行时使用。<br />
提供此属性是为了与以前版本的 ASP.NET 的兼容，以实现代码隐藏功能。在 ASP.NET 2.0 版中，应改用 CodeFile 属性指定该源文件的名称，同时使用 Inherits 属性指定该类的完全限定名称。<br />
　　CodeFile <br />
　　指定指向页引用的代码隐藏文件的路径。此属性与 Inherits 属性一起使用可以将代码隐藏源文件与网页相关联。此属性仅对编译的页有效。<br />
　　9.将所有独立的代码文件和AssemblyInfo.cs都被移到 App_Code 目录下。 <br />
　　但运行转换向导之后，您可能会发现某些代码分离文件（例如，*.aspx.cs 或 *.ascx.vb）被移到 App_Code 目录下。这表明代码分离文件的内容页面含有格式不正确的 Codebehind 指令，并且没有进行正确设置。也就是说，转换向导不能确定该代码分离文件是否实际绑定到某个特定的 .aspx 页面。<br />
　　10.Web 服务<br />
　　在 ASP.NET 1.x 中，Web 服务 (.asmx) 自动拆分到空白标题页面 (.asmx) 和包含实际方法的代码分离文件中。 <br />
　　Asp.net2.0下：<br />
　　? 将代码分离类移到 App_Code 目录下，以便使其自动变为可通过应用程序中的任意 ASP.NET 页面访问。&nbsp; <br />
? 更改 .asmx 文件中的 CodeBehind 属性，以便指向新位置。<br />
（请注意，代码分离文件不使用局部类，因此继续使用 CodeBehind 属性。）&nbsp; <br />
? 将所有的默认、Friend 和 Internal 范围的声明更改为 Public。 <br />
　　在1.1到2.0的升级过程中，你遇到过什么样的问题呢？可以写下来让大家共同学习，少走弯路。 </font></p>
<img src="http://www.cnblogs.com/leavingme/aggbug/1166228.html" width="1" height="1" /><br /><br /><div align="right"><a style="text-decoration: none;" href="http://leavingme.cnblogs.com/" target="_blank">陈源</a> 2008-01-14 01:20 <a href="http://www.cnblogs.com/leavingme/archive/2008/01/14/1166228.html#Feedback" target="_blank" style="text-decoration: none;">发表评论</a></div>]]